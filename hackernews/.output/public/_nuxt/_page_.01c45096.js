import{_ as S}from"./nuxt-link.dee2077a.js";import{f as $,g as r,o as t,c as o,h as d,w as m,d as p,a as u,t as _,i as a,F as k,b as g,j as V,k as q,l as x,r as D,u as E,m as y,n as H,q as T,s as z,v as G}from"./entry.719d578a.js";import{i as J,h as K,t as O,u as Q,f as B,g as U,_ as W}from"./store.073e79ca.js";import"./_plugin-vue_export-helper.c27b6911.js";const X={class:"news-list-nav"},Y={key:1,class:"disabled"},Z={class:"page"},ee={key:3,class:"disabled"},te=$({__name:"ItemListNav",props:{feed:{},page:{},maxPage:{}},setup(f){const e=f,c=r(()=>e.page<e.maxPage);return(s,b)=>{const n=S;return t(),o("div",X,[s.page>1?(t(),d(n,{key:0,to:`/${s.feed}/${s.page-1}`},{default:m(()=>[p(" < prev ")]),_:1},8,["to"])):(t(),o("span",Y,"< prev")),u("span",Z,_(s.page)+" / "+_(s.maxPage),1),a(c)?(t(),d(n,{key:2,to:`/${s.feed}/${s.page+1}`},{default:m(()=>[p(" more > ")]),_:1},8,["to"])):(t(),o("span",ee,"more >"))])}}});const se={class:"news-item"},ae={class:"score",title:"Score"},oe={class:"title"},ne=["href"],ie={class:"host"},le=u("br",null,null,-1),_e={class:"meta"},ue={key:0,class:"by"},re={class:"time"},pe={key:1,class:"comments-link"},ce=$({__name:"PostItem",props:{item:{}},setup(f){return(e,c)=>{const s=S;return t(),o("li",se,[u("span",ae,_(e.item.points),1),u("span",oe,[a(J)(e.item.url)?(t(),o(k,{key:0},[u("a",{href:e.item.url,target:"_blank",rel:"noopener"},_(e.item.title),9,ne),u("span",ie," ("+_(a(K)(e.item.url))+")",1)],64)):(t(),d(s,{key:1,to:"/item/"+e.item.id},{default:m(()=>[p(_(e.item.title),1)]),_:1},8,["to"]))]),le,u("span",_e,[e.item.type!=="job"?(t(),o("span",ue,[p(" by "),g(s,{to:"/user/"+e.item.user},{default:m(()=>[p(_(e.item.user),1)]),_:1},8,["to"])])):V("",!0),u("span",re,_(a(O)(e.item.time))+" ago ",1),p(" | "),e.item.type!=="job"?(t(),o("span",pe,[g(s,{to:"/item/"+e.item.id},{default:m(()=>[p(_(e.item.comments_count)+" comments",1)]),_:1},8,["to"])])):V("",!0)])])}}});const me={class:"view"},ye=$({__name:"[page]",async setup(f){var L;let e,c;const s=q(),b=x(),n=r(()=>+s.params.page||1),i=r(()=>s.params.feed),N=r(()=>!!y[i.value]),v=r(()=>Number(n.value)||1),w=D(v.value);E({title:(L=y[i.value])==null?void 0:L.title});const j=Q();N.value&&([e,c]=H(()=>B({page:v.value,feed:i.value})),await e,c());const P=r(()=>U(j.value,{page:v.value,feed:i.value})||[]),A=r(()=>P.value.length===0),h=r(()=>{var l;return+((l=y[i.value])==null?void 0:l.pages)||0});function I(l){if(N.value){if(l<=0||l>h.value){b.replace(`/${i.value}/1`);return}B({feed:i.value,page:n.value+1}).catch(()=>{}),w.value=l}}return T(()=>I(n.value)),z(n,l=>I(l)),(l,de)=>{const C=te,M=W,R=ce;return t(),o("div",me,[g(C,{feed:a(i),page:a(n),"max-page":a(h)},null,8,["feed","page","max-page"]),(t(),o("div",{key:a(w),class:"news-list"},[a(A)?(t(),d(M,{key:0})):(t(),o(k,{key:1},[u("ul",null,[(t(!0),o(k,null,G(a(P),F=>(t(),d(R,{key:F.id,item:F},null,8,["item"]))),128))]),g(C,{feed:a(i),page:a(n),"max-page":a(h)},null,8,["feed","page","max-page"])],64))]))])}}});export{ye as default};
